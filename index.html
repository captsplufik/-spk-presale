<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>SPK Token Presale - Connect Wallet</title>
<style>
  /* Minimal CSS for the button & page */
  :root {
    --primary: #6c5ce7;
    --primary-dark: #5649c0;
    --dark: #2d3436;
    --light: #f5f6fa;
    --success: #00b894;
  }
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background-color: var(--light);
    color: var(--dark);
    display: flex;
    height: 100vh;
    justify-content: center;
    align-items: center;
  }
  .btn {
    padding: 12px 25px;
    border-radius: 5px;
    border: none;
    cursor: pointer;
    font-weight: 600;
    background-color: var(--primary);
    color: white;
    transition: background-color 0.3s ease;
  }
  .btn:hover {
    background-color: var(--primary-dark);
  }
</style>
</head>
<body>

<button id="connect-wallet" class="btn">Connect Wallet</button>

<script type="module">
  import { TonConnect } from "https://cdn.jsdelivr.net/npm/@tonconnect/sdk@0.20.7/dist/tonconnect.sdk.es.js";

  const connectBtn = document.getElementById("connect-wallet");

  const connector = new TonConnect({
    manifestUrl: window.location.origin + '/tonconnect-manifest.json',
  });

  let walletConnected = false;

  async function connectWallet() {
    if (!walletConnected) {
      try {
        await connector.connect();
        walletConnected = true;
        const walletAddress = connector.account.address;
        connectBtn.textContent = walletAddress.slice(0, 6) + "..." + walletAddress.slice(-4);
        console.log("Connected wallet:", walletAddress);
      } catch (error) {
        console.error("Connection error:", error);
        alert("Failed to connect wallet. Make sure you have a compatible TON wallet installed.");
      }
    } else {
      // Disconnect logic
      walletConnected = false;
      connectBtn.textContent = "Connect Wallet";
      connector.disconnect();
      console.log("Disconnected wallet");
    }
  }

  connectBtn.addEventListener("click", connectWallet);

  // Optional: handle connection lost
  connector.onStatusChange((connected) => {
    if (!connected) {
      walletConnected = false;
      connectBtn.textContent = "Connect Wallet";
    }
  });
</script>

</body>
</html>
